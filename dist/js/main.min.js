"use strict";function initMap(){return MapModule.InitMap(google)}var pizzaApp=angular.module("pizzaApp",[]);pizzaApp.controller("MainController",["$scope","$window","$document",function(t,e,n){var i=angular.element(e).width(),o=0;o=i<=360?170:i>360&&i<=768?145:125,angular.element("body").scrollspy({target:".navbar",offset:o})}]),pizzaApp.factory("getData",["$http","$log",function(t,e){return{getJsonData:function(n,i){var o="files/"+n+".json";t.get(o).then(function(t,e,n,o){i(t)},function(t,n,i,o){e.warn(t,n,i,o)})}}}]),pizzaApp.filter("currencyComma",function(){return function(t){return t.toString().replace(".",",")}}),pizzaApp.directive("navigation",["$window","$document","$timeout","$q",function(t,e,n,i){return{restrict:"E",templateUrl:"/js/directives/navigation.tmpl.html",scope:!1,link:function(e,i,o,a){var r,l=i.find(".scroll-navbar"),c=function(){t.pageYOffset>=300?l.addClass("shrink-navbar"):l.removeClass("shrink-navbar")};angular.element(t).on("scroll",function(){r=n(c,250)}),i.on("$destroy",function(){n.cancel(r)})}}}]),pizzaApp.directive("carousel",function(){return{restrict:"E",templateUrl:"/js/directives/carousel.tmpl.html",scope:!1,link:function(t,e,n,i){e.find("#theCarousel").carousel()}}}),pizzaApp.directive("pizzaMenu",function(){return{restrict:"E",templateUrl:"/js/directives/pizzaMenu.tmpl.html",scope:!1,controller:["$scope","getData",function(t,e){e.getJsonData("pizza",function(e){t.listOfPizza=e.data}),e.getJsonData("dodatki",function(e){t.listOfAdds=e.data})}]}}),pizzaApp.directive("foodMenu",function(){return{restrict:"E",templateUrl:"/js/directives/foodMenu.tmpl.html",scope:!1,controller:["$scope","getData",function(t,e){e.getJsonData("dania",function(e){t.listOfFood=e.data})}]}}),pizzaApp.directive("dishMenu",function(){return{restrict:"E",templateUrl:"/js/directives/dishMenu.tmpl.html",scope:!1,controller:["$scope","getData",function(t,e){e.getJsonData("zestawy",function(e){t.listOfDishes=e.data,angular.forEach(t.listOfDishes,function(t){var e=Object.keys(t).length;t.numOfProp=e})})}]}}),pizzaApp.directive("promotion",function(){return{restrict:"E",templateUrl:"/js/directives/promotion.tmpl.html",scope:!1}}),pizzaApp.directive("contact",function(){return{restrict:"E",templateUrl:"/js/directives/contact.tmpl.html",scope:!1,controller:["$scope","$timeout",function(t,e){this.initMap=function(){var t={lat:50.175347,lng:20.236888},n={center:t,zoom:10},i=new google.maps.Map(angular.element("#map")[0],n),o={position:t,map:i,title:"Pizzeria u Jakuba"},a=new google.maps.InfoWindow({content:"<b>Pizzeria u Jakuba</b><br/>Posądza 95A<br/>32-104 Proszowice"}),r=new google.maps.Marker(o);r.addListener("click",function(){r.setAnimation(google.maps.Animation.BOUNCE),e(function(){r.setAnimation(null),a.open(i,r)},700)});new google.maps.Circle({strokeColor:"#ff0000",strokeOpacity:.2,strokeWeight:2,fillColor:"#ff0000",fillOpacity:.2,map:i,center:t,radius:7500})}}],link:function(t,e,n,i){i.initMap()}}}),pizzaApp.directive("scrollSpyNav",["$window","$document","$timeout","$q",function(t,e,n,i){return{restrict:"A",link:function(t,e){e.find("nav a").on("click",function(t){t.preventDefault();var n=angular.element(t.target);n.is("a")||(n=n.parent("a")),i.when(e.find(".navbar-collapse.in").collapse("hide")).then(function(){angular.element("body, html").stop().animate({scrollTop:angular.element(n.attr("href")).offset().top-100},1500,"easeInOutExpo")})})}}}]);var MapModule=function(t){return{InitMap:function(e){var n={lat:50.175347,lng:20.236888},i={center:n,zoom:10},o=new e.maps.Map(t("#map")[0],i),a={position:n,map:o,title:"Pizzeria u Jakuba"},r=new e.maps.InfoWindow({content:"<b>Pizzeria u Jakuba</b><br/>Posądza 95A<br/>32-104 Proszowice"}),l=new e.maps.Marker(a);l.addListener("click",function(){l.setAnimation(e.maps.Animation.BOUNCE),setTimeout(function(){l.setAnimation(null),r.open(o,l)},700)});new e.maps.Circle({strokeColor:"#ff0000",strokeOpacity:.2,strokeWeight:2,fillColor:"#ff0000",fillOpacity:.2,map:o,center:n,radius:7500})}}}(jQuery);